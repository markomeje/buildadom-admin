import{b as s,F as p,j as e,N as b,I as x,r as g,L as j}from"./index-f1189a9f.js";import{R as f,F as E}from"./Footer-772cf2d8.js";import{u as y,s as w}from"./spinner-c3fa37f6.js";import{a as v,u as S,N as P,C as R}from"./Navbar-e67db8c7.js";import{M as A}from"./Modal-e7a99e92.js";import{F as t,C as u}from"./Form-5ab9da63.js";import{A as C}from"./Alert-ba8871e4.js";import"./Fade-d5887953.js";import"./NoopTransition-040d6e3a.js";import"./divWithClassName-1c498f27.js";function G({show:m,handleClose:r}){const o="http://api.buildadom.test/api/v1",c="password",{successful:n,handleSubmit:h,message:i,submitting:l,errors:a,handleChange:d}=y(`${o}/reset/process`,{type:c,stage:"process"});return s(p,{children:[n&&e(b,{to:`/reset/${c}`}),e(A,{show:m,handleClose:r,showCloseButton:!0,children:e("div",{className:"m-auto",style:{maxWidth:"320px"},children:s("div",{children:[s("div",{className:"m-auto text-center",children:[e("h4",{className:"mb-3",children:"Reset Password?"}),e("p",{className:"text-dark mb-4",children:"Please kindly enter your email"})]}),s(t,{onSubmit:h,children:[s(t.Group,{className:"mb-4",children:[e(t.Label,{className:"text-dark",children:"Email"}),e(t.Control,{type:"email",name:"email",placeholder:"Enter your email",onChange:d,className:a&&(a!=null&&a.email)?"is-invalid":""}),a&&(a!=null&&a.email)?e("small",{className:"text-danger",children:a.email}):""]}),i&&e(C,{className:"my-4",variant:n?"success":"danger",children:i}),e("span",{className:"d-flex justify-content-center",style:{cursor:l?"not-allowed":"default"},children:e(v,{className:"bg-main px-4 text-center py-2 btn-lg rounded-pill",disabled:l,type:"submit",style:{width:"160px"},children:e("small",{className:"text-white",children:l?e(x,{src:w}):"Submit"})})})]})]})})})]})}function $(){const[m,r]=g.useState(!1),o=()=>r(!1),c="http://api.buildadom.test/api/v1",{successful:n,handleSubmit:h,message:i,submitting:l,errors:a,handleChange:d,response:k}=y(`${c}/auth/login`,{}),{login:L,user:F}=S();return g.useEffect(()=>{if(n){const{user:N}=k;N&&L(N)}},[n]),s(p,{children:[F.token?e(b,{to:"/marchant"}):s(t,{onSubmit:h,children:[s(f,{children:[e(u,{md:"12",children:s(t.Group,{className:"mb-3",children:[e(t.Label,{className:"text-dark",children:"Email"}),e(t.Control,{size:"lg",type:"email",className:a&&(a!=null&&a.email)?"is-invalid":"",name:"email",placeholder:"Enter your email",onChange:d}),a&&(a!=null&&a.email)?e("small",{className:"text-danger",children:a.email}):""]})}),e(u,{md:"12",children:s(t.Group,{className:"mb-3",children:[s(t.Label,{className:"d-flex justify-content-between",children:[e("div",{className:"text-dark",children:"Password"}),e("div",{className:"cursor-pointer text-main",onClick:()=>r(!0),children:"Forgot password?"})]}),e(t.Control,{size:"lg",type:"password",className:(a==null?void 0:a.password)&&"is-invalid",name:"password",placeholder:"Enter your password",onChange:d}),a&&(a!=null&&a.password)?e("small",{className:"text-danger",children:a.password}):""]})})]}),i&&e(C,{className:"mb-4 mt-2",variant:n?"success":"danger",children:i}),e("span",{className:"d-flex justify-content-end mt-2",style:{cursor:l?"not-allowed":"default"},children:e(v,{className:"bg-main px-4 w-100 text-center py-2 btn-lg rounded-pill",disabled:l,type:"submit",children:e("small",{className:"text-white",children:l?e(x,{src:w}):"Login"})})})]}),e(G,{show:m,handleClose:o})]})}function K(){return s(p,{children:[e(P,{showCenterLinks:!1}),e("div",{className:"m-auto pb-5",children:e(R,{style:{marginTop:"180px"},children:e(f,{className:"d-flex justify-content-center mb-5",children:s(u,{xs:"12",md:"4",children:[e("h3",{className:"text-center mb-4",children:"Login Here"}),s("div",{className:"bg-light p-4 rounded",children:[e("div",{className:"mb-4",children:e($,{})}),e("div",{className:"text-center",children:s("div",{className:"text-dark",children:["Don't have an acccount? ",e(j,{to:"/signup",children:"Register"})]})})]})]})})})}),e(E,{})]})}export{K as default};
